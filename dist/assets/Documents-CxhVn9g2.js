import { t as CanvasBoard } from "./CanvasBoard-Jsc0lNtu.js";
import { t as ChevronRight } from "./chevron-right-CzDMeZci.js";
import { t as FolderPlus } from "./folder-plus-B9LvlBLO.js";
import { n as Image } from "./useResourceStore-DS1bM1sC.js";
import { t as List } from "./list-ClPvxDTT.js";
import "./tabs-t_9NitxZ.js";
import { i as Plus } from "./dist-CtJuMi9V.js";
import { t as Trash2 } from "./trash-2-C2SfA0M7.js";
import { A as DialogTrigger, Bt as useNavigate, Dt as Primitive, Et as useCallbackRef, Ft as useComposedRefs, It as composeEventHandlers, Kt as __toESM, Mt as createContextScope, Nt as require_jsx_runtime, O as DialogHeader, S as useProjectStore_default, St as Presence, T as DialogContent, Ut as require_react, _ as Button, a as SelectItem, at as X, ct as PanelLeft, d as generateId, f as useQuickActionStore_default, ft as Folder, g as Input, gt as ChevronDown, h as Separator, i as SelectContent, k as DialogTitle, l as useDirection, lt as Network, mt as Download, o as SelectTrigger, pt as FileText, r as Select, rt as cn, s as SelectValue, st as Search, u as clamp, vt as createLucideIcon, w as Dialog, wt as useLayoutEffect2, x as useFunnelStore_default, y as useDocumentStore_default } from "./index-Cnt5-p5e.js";
import "./badge-BCThWnOt.js";
import "./ConfirmDialog-DDX-dSkb.js";
import { t as useFolderStore_default } from "./useFolderStore-McpWupQV.js";
var ArrowDownFromLine = createLucideIcon("arrow-down-from-line", [
	["path", {
		d: "M19 3H5",
		key: "1236rx"
	}],
	["path", {
		d: "M12 21V7",
		key: "gj6g52"
	}],
	["path", {
		d: "m6 15 6 6 6-6",
		key: "h15q88"
	}]
]);
var ArrowLeftFromLine = createLucideIcon("arrow-left-from-line", [
	["path", {
		d: "m9 6-6 6 6 6",
		key: "7v63n9"
	}],
	["path", {
		d: "M3 12h14",
		key: "13k4hi"
	}],
	["path", {
		d: "M21 19V5",
		key: "b4bplr"
	}]
]);
var ArrowRightFromLine = createLucideIcon("arrow-right-from-line", [
	["path", {
		d: "M3 5v14",
		key: "1nt18q"
	}],
	["path", {
		d: "M21 12H7",
		key: "13ipq5"
	}],
	["path", {
		d: "m15 18 6-6-6-6",
		key: "6tx3qv"
	}]
]);
var ArrowUpFromLine = createLucideIcon("arrow-up-from-line", [
	["path", {
		d: "m18 9-6-6-6 6",
		key: "kcunyi"
	}],
	["path", {
		d: "M12 3v14",
		key: "7cf3v8"
	}],
	["path", {
		d: "M5 21h14",
		key: "11awu3"
	}]
]);
var Bold = createLucideIcon("bold", [["path", {
	d: "M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",
	key: "mg9rjx"
}]]);
var GripVertical = createLucideIcon("grip-vertical", [
	["circle", {
		cx: "9",
		cy: "12",
		r: "1",
		key: "1vctgf"
	}],
	["circle", {
		cx: "9",
		cy: "5",
		r: "1",
		key: "hp0tcf"
	}],
	["circle", {
		cx: "9",
		cy: "19",
		r: "1",
		key: "fkjjf6"
	}],
	["circle", {
		cx: "15",
		cy: "12",
		r: "1",
		key: "1tmaij"
	}],
	["circle", {
		cx: "15",
		cy: "5",
		r: "1",
		key: "19l28e"
	}],
	["circle", {
		cx: "15",
		cy: "19",
		r: "1",
		key: "f4zoj3"
	}]
]);
var Heading1 = createLucideIcon("heading-1", [
	["path", {
		d: "M4 12h8",
		key: "17cfdx"
	}],
	["path", {
		d: "M4 18V6",
		key: "1rz3zl"
	}],
	["path", {
		d: "M12 18V6",
		key: "zqpxq5"
	}],
	["path", {
		d: "m17 12 3-2v8",
		key: "1hhhft"
	}]
]);
var Heading2 = createLucideIcon("heading-2", [
	["path", {
		d: "M4 12h8",
		key: "17cfdx"
	}],
	["path", {
		d: "M4 18V6",
		key: "1rz3zl"
	}],
	["path", {
		d: "M12 18V6",
		key: "zqpxq5"
	}],
	["path", {
		d: "M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",
		key: "9jr5yi"
	}]
]);
var Italic = createLucideIcon("italic", [
	["line", {
		x1: "19",
		x2: "10",
		y1: "4",
		y2: "4",
		key: "15jd3p"
	}],
	["line", {
		x1: "14",
		x2: "5",
		y1: "20",
		y2: "20",
		key: "bu0au3"
	}],
	["line", {
		x1: "15",
		x2: "9",
		y1: "4",
		y2: "20",
		key: "uljnxc"
	}]
]);
var PanelLeftClose = createLucideIcon("panel-left-close", [
	["rect", {
		width: "18",
		height: "18",
		x: "3",
		y: "3",
		rx: "2",
		key: "afitv7"
	}],
	["path", {
		d: "M9 3v18",
		key: "fh3hqa"
	}],
	["path", {
		d: "m16 15-3-3 3-3",
		key: "14y99z"
	}]
]);
var Quote = createLucideIcon("quote", [["path", {
	d: "M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",
	key: "rib7q0"
}], ["path", {
	d: "M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",
	key: "1ymkrd"
}]]);
var SeparatorHorizontal = createLucideIcon("separator-horizontal", [
	["path", {
		d: "m16 16-4 4-4-4",
		key: "3dv8je"
	}],
	["path", {
		d: "M3 12h18",
		key: "1i2n21"
	}],
	["path", {
		d: "m8 8 4-4 4 4",
		key: "2bscm2"
	}]
]);
var Table = createLucideIcon("table", [
	["path", {
		d: "M12 3v18",
		key: "108xh3"
	}],
	["rect", {
		width: "18",
		height: "18",
		x: "3",
		y: "3",
		rx: "2",
		key: "afitv7"
	}],
	["path", {
		d: "M3 9h18",
		key: "1pudct"
	}],
	["path", {
		d: "M3 15h18",
		key: "5xshup"
	}]
]);
var import_react = /* @__PURE__ */ __toESM(require_react(), 1);
var import_jsx_runtime = /* @__PURE__ */ __toESM(require_jsx_runtime(), 1);
var getCanvasPreviewInnerHtml = (canvas) => {
	const nodes = canvas.nodes;
	const edges = canvas.edges;
	let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
	nodes.forEach((n) => {
		if (n.x < minX) minX = n.x;
		if (n.x + 280 > maxX) maxX = n.x + 280;
		if (n.y < minY) minY = n.y;
		if (n.y + 74 > maxY) maxY = n.y + 74;
	});
	const containerWidth = 600;
	const containerHeight = 240;
	if (nodes.length === 0) {
		minX = 0;
		maxX = containerWidth;
		minY = 0;
		maxY = containerHeight;
	}
	const padding = 24;
	const contentWidth = maxX - minX || containerWidth;
	const contentHeight = maxY - minY || containerHeight;
	const scale = Math.min((containerWidth - padding * 2) / contentWidth, (containerHeight - padding * 2) / contentHeight, 1);
	const xOffset = (containerWidth - contentWidth * scale) / 2 - minX * scale;
	const yOffset = (containerHeight - contentHeight * scale) / 2 - minY * scale;
	const nodesHtml = nodes.map((n) => {
		return `<div style="position: absolute; left: ${n.x * scale + xOffset}px; top: ${n.y * scale + yOffset}px; width: ${280 * scale}px; height: ${74 * scale}px; background: hsl(var(--card)); border: 1px solid hsl(var(--border)); border-radius: ${8 * scale}px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); display: flex; align-items: center; padding: ${8 * scale}px; box-sizing: border-box; overflow: hidden; pointer-events: none;">
      <div style="flex-shrink: 0; width: ${24 * scale}px; height: ${24 * scale}px; background: hsl(var(--muted)); border-radius: ${6 * scale}px; margin-right: ${10 * scale}px; border: 1px solid hsl(var(--border)); display: flex; align-items: center; justify-content: center; color: hsl(var(--muted-foreground));">
        <svg xmlns="http://www.w3.org/2000/svg" width="${14 * scale}" height="${14 * scale}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>
      </div>
      <div style="min-width: 0; flex: 1;">
         <div style="font-size: ${12 * scale}px; font-weight: 600; color: hsl(var(--foreground)); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.2;">${n.data.name}</div>
         <div style="font-size: ${10 * scale}px; color: hsl(var(--muted-foreground)); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: ${2 * scale}px;">${n.data.subtitle || "Configure this step"}</div>
      </div>
    </div>`;
	}).join("");
	const edgesHtml = edges.map((e) => {
		const sourceNode = nodes.find((n) => n.id === e.source);
		const targetNode = nodes.find((n) => n.id === e.target);
		if (!sourceNode || !targetNode) return "";
		const startX = (sourceNode.x + 280) * scale + xOffset;
		const startY = (sourceNode.y + 37) * scale + yOffset;
		const endX = targetNode.x * scale + xOffset;
		const endY = (targetNode.y + 37) * scale + yOffset;
		return `<path d="${`M ${startX} ${startY} C ${startX + 30 * scale} ${startY}, ${endX - 30 * scale} ${endY}, ${endX} ${endY}`}" stroke="hsl(var(--border))" stroke-width="${2 * scale}" fill="none" pointer-events="none" />`;
	}).join("");
	const emptyStateHtml = nodes.length === 0 ? `
    <div style="position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; color: hsl(var(--muted-foreground)); pointer-events: none;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 8px; opacity: 0.5;"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><path d="M9 17V7h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2z"/></svg>
      <span style="font-size: 13px; font-weight: 500;">Canvas vazio</span>
    </div>
  ` : "";
	return `
    <h4 style="margin: 0 0 12px 0; font-size: 16px; font-weight: 700; color: hsl(var(--foreground)); font-family: inherit; line-height: 1; pointer-events: none;">${canvas.name}</h4>
    <div class="border border-border bg-muted/20 rounded-xl overflow-hidden shadow-sm cursor-pointer transition-all hover:border-primary/40 hover:shadow-md ring-offset-background hover:ring-1 hover:ring-primary/20" style="width: 100%; max-width: 600px; height: ${containerHeight}px; position: relative;">
      <div style="position: absolute; inset: 0; background-image: radial-gradient(hsl(var(--border)) 1px, transparent 0); background-size: 16px 16px; opacity: 0.4; pointer-events: none;"></div>
      ${emptyStateHtml}
      <svg style="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none;">
        ${edgesHtml}
      </svg>
      ${nodesHtml}
      <div class="absolute inset-0 flex items-center justify-center gap-3 bg-background/60 backdrop-blur-[2px] opacity-0 transition-opacity duration-200 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto">
         <div data-action="preview" class="bg-card px-4 py-2 rounded-xl shadow-lg text-sm font-semibold text-foreground flex items-center gap-2 transform translate-y-2 transition-all hover:bg-muted border border-border cursor-pointer pointer-events-auto group-hover:translate-y-0">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/></svg>
           Visualizar Lateral
         </div>
         <div data-action="navigate" class="bg-primary px-4 py-2 rounded-xl shadow-lg text-sm font-semibold text-primary-foreground flex items-center gap-2 transform translate-y-2 transition-all hover:brightness-110 border border-primary cursor-pointer pointer-events-auto group-hover:translate-y-0">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"/><path d="m21 3-9 9"/><path d="M15 3h6v6"/></svg>
           Ir até o Canvas
         </div>
      </div>
    </div>
  `;
};
function RichTextEditor({ doc, onChange, onTitleChange, onProjectChange }) {
	const navigate = useNavigate();
	const editorRef = (0, import_react.useRef)(null);
	const containerRef = (0, import_react.useRef)(null);
	const [funnels, setFunnels] = useFunnelStore_default();
	const [projects] = useProjectStore_default();
	const [canvasModalOpen, setCanvasModalOpen] = (0, import_react.useState)(false);
	const [selectedCanvasId, setSelectedCanvasId] = (0, import_react.useState)(null);
	const [imageModalOpen, setImageModalOpen] = (0, import_react.useState)(false);
	const [imageUrl, setImageUrl] = (0, import_react.useState)("");
	const [savedRange, setSavedRange] = (0, import_react.useState)(null);
	const [editingCanvasId, setEditingCanvasId] = (0, import_react.useState)(null);
	const [isOutlineOpen, setIsOutlineOpen] = (0, import_react.useState)(true);
	const [activeTableNode, setActiveTableNode] = (0, import_react.useState)(null);
	const [activeTableCell, setActiveTableCell] = (0, import_react.useState)(null);
	const [headers, setHeaders] = (0, import_react.useState)([]);
	const extractHeaders = (0, import_react.useCallback)(() => {
		if (!editorRef.current) return;
		const headerElements = editorRef.current.querySelectorAll("h1, h2, h3, h4, h5, h6");
		const extracted = [];
		headerElements.forEach((el, index) => {
			if (!el.id) el.id = `header-${index}-${Date.now()}`;
			extracted.push({
				id: el.id,
				text: el.textContent || "Sem Título",
				level: parseInt(el.tagName.replace("H", ""), 10)
			});
		});
		setHeaders(extracted);
	}, []);
	const [panelWidth, setPanelWidth] = (0, import_react.useState)(() => {
		if (typeof window !== "undefined") {
			if (window.innerWidth >= 1280) return 600;
			if (window.innerWidth >= 1024) return 500;
			return 450;
		}
		return 500;
	});
	const [isResizing, setIsResizing] = (0, import_react.useState)(false);
	const isResizingRef = (0, import_react.useRef)(false);
	(0, import_react.useEffect)(() => {
		if (editorRef.current && editorRef.current.innerHTML !== doc.content) {
			editorRef.current.innerHTML = doc.content;
			let hasChanges = false;
			editorRef.current.querySelectorAll(".canvas-preview-block").forEach((block) => {
				const canvasId = block.getAttribute("data-canvas-id");
				if (canvasId) {
					const canvas = funnels.find((f) => f.id === canvasId);
					if (canvas) {
						block.setAttribute("style", "margin: 32px 0; user-select: none; display: flex; flex-direction: column; align-items: flex-start;");
						const newInnerHtml = getCanvasPreviewInnerHtml(canvas);
						if (block.innerHTML !== newInnerHtml) {
							block.innerHTML = newInnerHtml;
							hasChanges = true;
						}
					}
				}
			});
			if (hasChanges) onChange(editorRef.current.innerHTML);
			extractHeaders();
		}
	}, [doc.id, doc.content]);
	const saveSelection = (0, import_react.useCallback)(() => {
		const selection = window.getSelection();
		if (selection && selection.rangeCount > 0) {
			const range = selection.getRangeAt(0);
			if (editorRef.current && editorRef.current.contains(range.commonAncestorContainer)) {
				setSavedRange(range.cloneRange());
				let node = range.commonAncestorContainer;
				if (node?.nodeType === Node.TEXT_NODE) node = node.parentNode;
				const cell = node?.closest?.("td, th");
				const table = node?.closest?.("table");
				setActiveTableCell(cell);
				setActiveTableNode(table);
			} else {
				setActiveTableCell(null);
				setActiveTableNode(null);
			}
		}
	}, []);
	const restoreSelection = (0, import_react.useCallback)(() => {
		editorRef.current?.focus();
		if (savedRange) {
			const selection = window.getSelection();
			if (selection) {
				selection.removeAllRanges();
				selection.addRange(savedRange);
			}
		} else if (editorRef.current) {
			const range = document.createRange();
			range.selectNodeContents(editorRef.current);
			range.collapse(false);
			const selection = window.getSelection();
			if (selection) {
				selection.removeAllRanges();
				selection.addRange(range);
			}
		}
	}, [savedRange]);
	const insertHtmlAtSelection = (htmlString) => {
		restoreSelection();
		let success = false;
		try {
			success = document.execCommand("insertHTML", false, htmlString);
		} catch (e) {
			success = false;
		}
		if (!success) {
			const selection = window.getSelection();
			if (selection && selection.rangeCount > 0) {
				const range = selection.getRangeAt(0);
				range.deleteContents();
				const el = document.createElement("div");
				el.innerHTML = htmlString;
				const frag = document.createDocumentFragment();
				let node, lastNode;
				while (node = el.firstChild) lastNode = frag.appendChild(node);
				range.insertNode(frag);
				if (lastNode) {
					range.setStartAfter(lastNode);
					range.collapse(true);
					selection.removeAllRanges();
					selection.addRange(range);
				}
			}
		}
		if (editorRef.current) onChange(editorRef.current.innerHTML);
	};
	const exec = (cmd, val) => {
		document.execCommand(cmd, false, val);
		editorRef.current?.focus();
		if (editorRef.current) onChange(editorRef.current.innerHTML);
	};
	const insertImage = (e) => {
		e.preventDefault();
		if (!imageUrl.trim()) return;
		insertHtmlAtSelection(`<img src="${imageUrl}" alt="Imagem Inserida" style="max-width: 100%; border-radius: 8px; margin: 16px 0;" /><p><br></p>`);
		setImageUrl("");
		setImageModalOpen(false);
	};
	const insertCanvas = () => {
		if (!selectedCanvasId) return;
		const canvas = funnels.find((f) => f.id === selectedCanvasId);
		if (!canvas) return;
		insertHtmlAtSelection(`
      <div contenteditable="false" class="canvas-preview-block group" data-canvas-id="${canvas.id}" style="margin: 32px 0; user-select: none; display: flex; flex-direction: column; align-items: flex-start;">
        ${getCanvasPreviewInnerHtml(canvas)}
      </div>
      <p><br></p>
    `);
		setCanvasModalOpen(false);
		setSelectedCanvasId(null);
	};
	const handleToolbarMouseDown = (e) => {
		e.preventDefault();
	};
	const handleEditorClick = (e) => {
		const target = e.target;
		const canvasBlock = target.closest(".canvas-preview-block");
		if (canvasBlock) {
			e.preventDefault();
			const canvasId = canvasBlock.getAttribute("data-canvas-id");
			if (canvasId) if (target.closest("[data-action]")?.getAttribute("data-action") === "navigate") navigate(`/canvas/${canvasId}`);
			else setEditingCanvasId(canvasId);
		}
		let node = target;
		const cell = node?.closest?.("td, th");
		const table = node?.closest?.("table");
		setActiveTableCell(cell);
		setActiveTableNode(table);
	};
	const insertTable = () => {
		insertHtmlAtSelection(`
      <table class="w-full border-collapse border border-border my-4 shadow-sm rounded-lg overflow-hidden bg-card text-sm">
        <thead>
          <tr class="bg-muted/50 border-b border-border">
            <th class="border border-border p-3 text-left font-semibold">Cabeçalho 1</th>
            <th class="border border-border p-3 text-left font-semibold">Cabeçalho 2</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="border border-border p-3">Linha 1, Col 1</td>
            <td class="border border-border p-3">Linha 1, Col 2</td>
          </tr>
          <tr class="border-b border-border">
            <td class="border border-border p-3">Linha 2, Col 1</td>
            <td class="border border-border p-3">Linha 2, Col 2</td>
          </tr>
        </tbody>
      </table>
      <p><br/></p>
    `);
	};
	const addRow = (direction) => {
		if (!activeTableCell || !activeTableNode) return;
		const tr = activeTableCell.closest("tr");
		if (!tr) return;
		const newTr = document.createElement("tr");
		newTr.className = "border-b border-border";
		const cellCount = tr.children.length;
		for (let i = 0; i < cellCount; i++) {
			const td = document.createElement("td");
			td.className = "border border-border p-3";
			td.innerHTML = "<br/>";
			newTr.appendChild(td);
		}
		if (direction === "above") tr.parentNode?.insertBefore(newTr, tr);
		else tr.parentNode?.insertBefore(newTr, tr.nextSibling);
		onChange(editorRef.current.innerHTML);
	};
	const addColumn = (direction) => {
		if (!activeTableCell || !activeTableNode) return;
		const tr = activeTableCell.closest("tr");
		if (!tr) return;
		const cellIndex = Array.from(tr.children).indexOf(activeTableCell);
		activeTableNode.querySelectorAll("tr").forEach((row) => {
			const isHeader = row.parentNode?.nodeName.toLowerCase() === "thead";
			const cell = document.createElement(isHeader ? "th" : "td");
			cell.className = isHeader ? "border border-border p-3 text-left font-semibold" : "border border-border p-3";
			cell.innerHTML = "<br/>";
			const targetCell = row.children[cellIndex];
			if (targetCell) if (direction === "left") row.insertBefore(cell, targetCell);
			else row.insertBefore(cell, targetCell.nextSibling);
		});
		onChange(editorRef.current.innerHTML);
	};
	const deleteRow = () => {
		if (!activeTableCell || !activeTableNode) return;
		const tr = activeTableCell.closest("tr");
		if (!tr) return;
		if (activeTableNode.querySelectorAll("tr").length <= 2) return deleteTable();
		tr.remove();
		setActiveTableCell(null);
		onChange(editorRef.current.innerHTML);
	};
	const deleteTable = () => {
		if (!activeTableNode) return;
		activeTableNode.remove();
		setActiveTableNode(null);
		setActiveTableCell(null);
		onChange(editorRef.current.innerHTML);
	};
	const insertNewGuide = () => {
		insertHtmlAtSelection(`
      <div contenteditable="false" style="margin: 80px -40px; height: 32px; background: #f8fafc; border-top: 1px dashed #cbd5e1; border-bottom: 1px dashed #cbd5e1; display: flex; align-items: center; justify-content: center; user-select: none;">
         <span style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.1em; color: #94a3b8; font-weight: 600;">Nova Seção</span>
      </div>
      <h2>Nova Guia</h2>
      <p><br/></p>
    `);
		setTimeout(() => {
			if (editorRef.current) {
				const h2s = editorRef.current.querySelectorAll("h2");
				const lastH2 = h2s[h2s.length - 1];
				if (lastH2) {
					const selection = window.getSelection();
					const range = document.createRange();
					range.selectNodeContents(lastH2);
					selection?.removeAllRanges();
					selection?.addRange(range);
					lastH2.scrollIntoView({
						behavior: "smooth",
						block: "center"
					});
				}
			}
		}, 50);
	};
	const handleCanvasChange = (updatedFunnel) => {
		setFunnels(funnels.map((f) => f.id === updatedFunnel.id ? updatedFunnel : f));
		if (editorRef.current) {
			let hasChanges = false;
			editorRef.current.querySelectorAll(`.canvas-preview-block[data-canvas-id="${updatedFunnel.id}"]`).forEach((block) => {
				block.setAttribute("style", "margin: 32px 0; user-select: none; display: flex; flex-direction: column; align-items: flex-start;");
				block.innerHTML = getCanvasPreviewInnerHtml(updatedFunnel);
				hasChanges = true;
			});
			if (hasChanges) onChange(editorRef.current.innerHTML);
		}
	};
	const startResizing = (0, import_react.useCallback)((e) => {
		e.preventDefault();
		e.stopPropagation();
		isResizingRef.current = true;
		setIsResizing(true);
		document.body.style.cursor = "col-resize";
		document.body.style.userSelect = "none";
		const handleMouseMove = (ev) => {
			if (!isResizingRef.current || !containerRef.current) return;
			const containerRect = containerRef.current.getBoundingClientRect();
			const newWidth = containerRect.right - ev.clientX;
			const minW = 450;
			const maxW = Math.min(window.innerWidth * .8, containerRect.width - 300);
			if (newWidth >= minW && newWidth <= maxW) setPanelWidth(newWidth);
			else if (newWidth < minW) setPanelWidth(minW);
			else if (newWidth > maxW) setPanelWidth(maxW);
		};
		const handleMouseUp = () => {
			isResizingRef.current = false;
			setIsResizing(false);
			document.body.style.cursor = "";
			document.body.style.userSelect = "";
			document.removeEventListener("mousemove", handleMouseMove);
			document.removeEventListener("mouseup", handleMouseUp);
		};
		document.addEventListener("mousemove", handleMouseMove);
		document.addEventListener("mouseup", handleMouseUp);
	}, []);
	const activeCanvas = funnels.find((f) => f.id === editingCanvasId);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
		ref: containerRef,
		className: "flex w-full h-full overflow-hidden bg-transparent relative",
		children: [
			/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
				className: cn("hidden xl:flex shrink-0 bg-transparent flex-col transition-all duration-300 border-r border-slate-200/50", isOutlineOpen ? "w-64" : "w-[60px] items-center"),
				children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
					className: cn("flex flex-col py-5 w-full", isOutlineOpen ? "px-6" : "px-0 items-center"),
					children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: cn("flex items-center w-full", isOutlineOpen ? "justify-between" : "justify-center"),
						children: [isOutlineOpen && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("h3", {
							className: "text-sm font-semibold text-foreground flex items-center gap-2 whitespace-nowrap overflow-hidden",
							children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(List, {
								size: 16,
								className: "text-primary shrink-0"
							}), " Guias no documento"]
						}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
							variant: "ghost",
							size: "icon",
							className: "h-8 w-8 text-muted-foreground hover:text-foreground shrink-0 rounded-lg hover:bg-slate-200/50",
							onClick: () => setIsOutlineOpen(!isOutlineOpen),
							title: isOutlineOpen ? "Ocultar guias" : "Sua estrutura de documento",
							children: isOutlineOpen ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(PanelLeftClose, { size: 16 }) : /* @__PURE__ */ (0, import_jsx_runtime.jsx)(PanelLeft, { size: 16 })
						})]
					}), isOutlineOpen && /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
						className: "mt-4 flex w-full",
						children: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
							variant: "outline",
							size: "sm",
							className: "h-8 shadow-sm flex-1 font-semibold text-xs border-dashed text-muted-foreground hover:text-foreground hover:border-solid hover:border-primary/50 hover:bg-primary/5",
							onClick: insertNewGuide,
							title: "Adicionar novo título",
							children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Plus, {
								size: 14,
								className: "mr-1.5"
							}), " Adicionar Guia"]
						})
					})]
				}), isOutlineOpen && /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
					className: "flex-1 overflow-y-auto space-y-1 p-6 pt-0 pr-4 no-scrollbar animate-fade-in w-full",
					children: headers.length === 0 ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)("p", {
						className: "text-xs text-muted-foreground italic",
						children: "Adicione títulos (H1, H2, etc.) para criar o sumário do documento."
					}) : headers.map((header) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)("button", {
						onClick: () => {
							const el = document.getElementById(header.id);
							if (el) el.scrollIntoView({
								behavior: "smooth",
								block: "center"
							});
						},
						style: { paddingLeft: `${(header.level - 1) * 12}px` },
						className: cn("w-full text-left text-sm py-1.5 px-2 rounded-md hover:bg-primary/10 transition-colors line-clamp-2", header.level === 1 ? "font-semibold text-foreground mt-2" : "text-muted-foreground"),
						children: header.text
					}, header.id))
				})]
			}),
			/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
				className: cn("flex flex-col h-full overflow-y-auto ease-in-out flex-1 min-w-0 px-4 sm:px-6 lg:px-8", !isResizing && "transition-all duration-300"),
				children: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
					className: cn("flex flex-col mx-auto w-full bg-white shadow-sm border border-slate-200/60 rounded-xl relative my-4 sm:my-6 lg:my-8", !isResizing && "transition-all duration-300", "max-w-[1000px] min-h-[max-content]"),
					children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: "flex flex-col gap-4 border-b border-slate-100 sticky top-0 bg-white/95 backdrop-blur z-30 shrink-0 p-6 lg:px-10 lg:pt-10 lg:pb-4 rounded-t-xl shadow-sm",
						children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
							className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4",
							children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Input, {
								value: doc.title,
								onChange: (e) => onTitleChange(e.target.value),
								className: "text-3xl font-bold border-none outline-none focus-visible:ring-0 px-0 h-auto shadow-none bg-transparent flex-1",
								placeholder: "Título do Documento"
							}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
								className: "flex flex-col sm:flex-row items-end sm:items-center gap-2 shrink-0",
								children: [doc.funnelId && doc.nodeId && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
									variant: "outline",
									size: "sm",
									onClick: () => navigate(`/canvas/${doc.funnelId}?nodeId=${doc.nodeId}`),
									className: "text-purple-600 border-purple-200 bg-purple-50 hover:bg-purple-100 shrink-0 h-9",
									children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Network, {
										size: 14,
										className: "mr-1.5"
									}), " Ver no Canvas"]
								}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Select, {
									value: doc.projectId || "none",
									onValueChange: (val) => onProjectChange(val === "none" ? null : val),
									children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(SelectTrigger, {
										className: "w-[180px] h-9 bg-muted/30 border-slate-200",
										children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(SelectValue, { placeholder: "Project" })
									}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(SelectContent, { children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(SelectItem, {
										value: "none",
										children: "Nenhum Projeto"
									}), projects.map((p) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)(SelectItem, {
										value: p.id,
										children: p.name
									}, p.id))] })]
								})]
							})]
						}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
							className: "flex items-center gap-1 shrink-0 flex-wrap mt-2",
							children: [
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("formatBlock", "H1"),
									title: "Título 1",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Heading1, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("formatBlock", "H2"),
									title: "Título 2",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Heading2, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
									orientation: "vertical",
									className: "h-4 mx-1"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("bold"),
									title: "Negrito",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Bold, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("italic"),
									title: "Itálico",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Italic, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("underline"),
									title: "Sublinhado",
									className: "rounded-lg h-8 w-8 text-slate-700 font-serif font-bold underline hover:bg-slate-100",
									children: "U"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("strikeThrough"),
									title: "Tachado",
									className: "rounded-lg h-8 w-8 text-slate-700 font-serif font-bold line-through hover:bg-slate-100",
									children: "S"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
									orientation: "vertical",
									className: "h-4 mx-1"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("insertUnorderedList"),
									title: "Lista",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(List, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("insertOrderedList"),
									title: "Lista Numerada",
									className: "rounded-lg h-8 w-8 font-mono text-sm font-bold hover:bg-slate-100",
									children: "1."
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
									orientation: "vertical",
									className: "h-4 mx-1"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("justifyLeft"),
									title: "Alinhar à Esquerda",
									className: "rounded-lg h-8 w-8 flex flex-col items-start gap-0.5 justify-center py-1.5 hover:bg-slate-100",
									children: [
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-4 bg-slate-700 rounded-full" }),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-3 bg-slate-700 rounded-full" }),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-4 bg-slate-700 rounded-full" })
									]
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("justifyCenter"),
									title: "Centralizar",
									className: "rounded-lg h-8 w-8 flex flex-col items-center gap-0.5 justify-center py-1.5 hover:bg-slate-100",
									children: [
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-4 bg-slate-700 rounded-full" }),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-3 bg-slate-700 rounded-full" }),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-4 bg-slate-700 rounded-full" })
									]
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("justifyRight"),
									title: "Alinhar à Direita",
									className: "rounded-lg h-8 w-8 flex flex-col items-end gap-0.5 justify-center py-1.5 hover:bg-slate-100",
									children: [
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-4 bg-slate-700 rounded-full" }),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-3 bg-slate-700 rounded-full" }),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "h-0.5 w-4 bg-slate-700 rounded-full" })
									]
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
									orientation: "vertical",
									className: "h-4 mx-1"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("formatBlock", "BLOCKQUOTE"),
									title: "Citação",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Quote, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: () => exec("insertHorizontalRule"),
									title: "Divisor",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(SeparatorHorizontal, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
									orientation: "vertical",
									className: "h-4 mx-1"
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									variant: "ghost",
									size: "icon",
									onMouseDown: handleToolbarMouseDown,
									onClick: insertTable,
									title: "Tabela",
									className: "rounded-lg h-8 w-8 hover:bg-slate-100",
									children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Table, { size: 16 })
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Dialog, {
									open: imageModalOpen,
									onOpenChange: setImageModalOpen,
									children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogTrigger, {
										asChild: true,
										children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: () => saveSelection(),
											title: "Adicionar Imagem",
											className: "rounded-lg h-8 w-8 hover:bg-slate-100",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Image, { size: 16 })
										})
									}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(DialogContent, { children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogHeader, { children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogTitle, { children: "Adicionar Imagem" }) }), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("form", {
										onSubmit: insertImage,
										className: "space-y-4 pt-4",
										children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Input, {
											placeholder: "URL da Imagem (ex: https://...)",
											value: imageUrl,
											onChange: (e) => setImageUrl(e.target.value),
											autoFocus: true
										}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											type: "submit",
											className: "w-full",
											children: "Inserir Imagem"
										})]
									})] })]
								}),
								/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Dialog, {
									open: canvasModalOpen,
									onOpenChange: setCanvasModalOpen,
									children: [
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogTrigger, {
											asChild: true,
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
												variant: "ghost",
												size: "sm",
												onMouseDown: () => saveSelection(),
												className: "ml-2 flex items-center bg-primary/10 hover:bg-primary/20 text-primary transition-colors shrink-0 rounded-xl font-semibold px-4 h-8",
												title: "Importar Canvas",
												children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Network, {
													size: 14,
													className: "mr-2"
												}), " Importar Canvas"]
											})
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
											variant: "ghost",
											size: "sm",
											className: "flex items-center text-muted-foreground hover:text-foreground transition-colors shrink-0 rounded-xl px-3 h-8",
											title: "Exportar como texto",
											onClick: () => {
												const text = editorRef.current?.innerText || "";
												const blob = new Blob([`# ${doc.title}\n\n${text}`], { type: "text/plain" });
												const url = URL.createObjectURL(blob);
												const a = document.createElement("a");
												a.href = url;
												a.download = `${doc.title.replace(/\s+/g, "_")}.txt`;
												a.click();
												URL.revokeObjectURL(url);
											},
											children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Download, {
												size: 14,
												className: "mr-1.5"
											}), " Exportar"]
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(DialogContent, {
											className: "max-w-2xl",
											children: [
												/* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogHeader, { children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogTitle, { children: "Selecionar Canvas" }) }),
												/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
													className: "grid grid-cols-2 gap-4 py-4 max-h-[60vh] overflow-y-auto px-1",
													children: [funnels.map((f) => /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
														onClick: () => setSelectedCanvasId(f.id),
														className: cn("border rounded-lg p-4 cursor-pointer transition-all flex flex-col items-center justify-center text-center gap-2", selectedCanvasId === f.id ? "border-primary ring-1 ring-primary bg-primary/5" : "hover:border-primary/50 bg-card"),
														children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
															className: "w-10 h-10 rounded-full bg-muted flex items-center justify-center mb-1",
															children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Network, {
																size: 20,
																className: selectedCanvasId === f.id ? "text-primary" : "text-muted-foreground"
															})
														}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", { children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)("h4", {
															className: "font-medium text-sm",
															children: f.name
														}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("p", {
															className: "text-xs text-muted-foreground",
															children: [f.nodes.length, " blocos mapeados"]
														})] })]
													}, f.id)), funnels.length === 0 && /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
														className: "col-span-2 text-center py-8 text-muted-foreground text-sm",
														children: "Nenhum canvas disponível para importação."
													})]
												}),
												/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
													onClick: insertCanvas,
													disabled: !selectedCanvasId,
													className: "w-full",
													children: "Importar Visualização"
												})
											]
										})
									]
								}),
								activeTableNode && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
									className: "flex items-center gap-1 animate-in fade-in zoom-in-95 duration-200 ml-4 py-1 px-2 bg-primary/10 border border-primary/20 rounded-lg shrink-0",
									children: [
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)("span", {
											className: "text-xs font-semibold text-primary mr-1 px-1",
											children: "Tabela"
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
											orientation: "vertical",
											className: "h-4 mx-1 bg-primary/20"
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: handleToolbarMouseDown,
											onClick: () => addRow("above"),
											className: "h-7 w-7 text-primary hover:bg-primary/20 rounded-md",
											title: "Adicionar Linha Acima",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ArrowUpFromLine, { size: 14 })
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: handleToolbarMouseDown,
											onClick: () => addRow("below"),
											className: "h-7 w-7 text-primary hover:bg-primary/20 rounded-md",
											title: "Adicionar Linha Abaixo",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ArrowDownFromLine, { size: 14 })
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
											orientation: "vertical",
											className: "h-4 mx-1 bg-primary/20"
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: handleToolbarMouseDown,
											onClick: () => addColumn("left"),
											className: "h-7 w-7 text-primary hover:bg-primary/20 rounded-md",
											title: "Adicionar Coluna à Esquerda",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ArrowLeftFromLine, { size: 14 })
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: handleToolbarMouseDown,
											onClick: () => addColumn("right"),
											className: "h-7 w-7 text-primary hover:bg-primary/20 rounded-md",
											title: "Adicionar Coluna à Direita",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ArrowRightFromLine, { size: 14 })
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Separator, {
											orientation: "vertical",
											className: "h-4 mx-1 bg-primary/20"
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: handleToolbarMouseDown,
											onClick: deleteRow,
											className: "h-7 w-7 text-destructive hover:bg-destructive/10 rounded-md",
											title: "Excluir Linha",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Trash2, {
												size: 13,
												className: "opacity-80"
											})
										}),
										/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
											variant: "ghost",
											size: "icon",
											onMouseDown: handleToolbarMouseDown,
											onClick: deleteTable,
											className: "h-7 w-7 text-destructive hover:bg-destructive/10 rounded-md",
											title: "Excluir Tabela Inteira",
											children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Trash2, { size: 14 })
										})
									]
								})
							]
						})]
					}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
						className: "mx-6 lg:mx-10 mb-12 mt-8 flex-1 flex flex-col relative w-full",
						children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
							ref: editorRef,
							contentEditable: true,
							className: "flex-1 outline-none prose prose-slate max-w-none focus:outline-none min-h-[500px] pb-32 prose-headings:font-bold prose-h1:text-4xl prose-h2:text-2xl prose-p:text-base prose-p:leading-relaxed",
							onBlur: (e) => {
								saveSelection();
								onChange(e.currentTarget.innerHTML);
								extractHeaders();
							},
							onKeyUp: () => {
								saveSelection();
								extractHeaders();
							},
							onMouseUp: saveSelection,
							onInput: (e) => {
								onChange(e.currentTarget.innerHTML);
							},
							onClick: handleEditorClick,
							style: { caretColor: "hsl(var(--primary))" }
						})
					})]
				})
			}),
			editingCanvasId && activeCanvas && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
				style: { width: `${panelWidth}px` },
				className: cn("h-full flex flex-col bg-background shadow-[-10px_0_40px_rgba(0,0,0,0.08)] z-20 shrink-0 border-l border-border relative", !isResizing && "transition-all duration-300", "animate-in slide-in-from-right"),
				children: [
					/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: "absolute -left-3 top-0 bottom-0 w-6 cursor-col-resize z-50 group/resizer flex items-center justify-center",
						onMouseDown: startResizing,
						children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", { className: "absolute w-1.5 h-full left-1/2 -translate-x-1/2 opacity-0 group-hover/resizer:opacity-100 bg-primary/20 transition-opacity" }), /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
							className: "w-[20px] h-[48px] bg-slate-900 rounded-full flex items-center justify-center text-white shadow-md transition-transform group-hover/resizer:scale-105 z-10",
							children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(GripVertical, {
								size: 14,
								className: "opacity-80"
							})
						})]
					}),
					/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: "h-16 border-b flex items-center justify-between px-6 bg-card shrink-0 shadow-sm z-10 relative",
						children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
							className: "flex items-center gap-3 text-primary",
							children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Network, { size: 20 }), /* @__PURE__ */ (0, import_jsx_runtime.jsx)("h3", {
								className: "font-bold text-base text-foreground",
								children: activeCanvas.name
							})]
						}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
							variant: "ghost",
							size: "icon",
							onClick: () => setEditingCanvasId(null),
							className: "text-muted-foreground hover:text-foreground hover:bg-muted rounded-full",
							children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(X, { size: 18 })
						})]
					}),
					/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
						className: "flex-1 relative flex overflow-hidden",
						children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(CanvasBoard, {
							funnel: activeCanvas,
							onChange: handleCanvasChange,
							hideHeader: true,
							onBack: () => setEditingCanvasId(null)
						})
					})
				]
			})
		]
	});
}
function useStateMachine(initialState, machine) {
	return import_react.useReducer((state, event) => {
		return machine[state][event] ?? state;
	}, initialState);
}
var SCROLL_AREA_NAME = "ScrollArea";
var [createScrollAreaContext, createScrollAreaScope] = createContextScope(SCROLL_AREA_NAME);
var [ScrollAreaProvider, useScrollAreaContext] = createScrollAreaContext(SCROLL_AREA_NAME);
var ScrollArea$1 = import_react.forwardRef((props, forwardedRef) => {
	const { __scopeScrollArea, type = "hover", dir, scrollHideDelay = 600, ...scrollAreaProps } = props;
	const [scrollArea, setScrollArea] = import_react.useState(null);
	const [viewport, setViewport] = import_react.useState(null);
	const [content, setContent] = import_react.useState(null);
	const [scrollbarX, setScrollbarX] = import_react.useState(null);
	const [scrollbarY, setScrollbarY] = import_react.useState(null);
	const [cornerWidth, setCornerWidth] = import_react.useState(0);
	const [cornerHeight, setCornerHeight] = import_react.useState(0);
	const [scrollbarXEnabled, setScrollbarXEnabled] = import_react.useState(false);
	const [scrollbarYEnabled, setScrollbarYEnabled] = import_react.useState(false);
	const composedRefs = useComposedRefs(forwardedRef, (node) => setScrollArea(node));
	const direction = useDirection(dir);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaProvider, {
		scope: __scopeScrollArea,
		type,
		dir: direction,
		scrollHideDelay,
		scrollArea,
		viewport,
		onViewportChange: setViewport,
		content,
		onContentChange: setContent,
		scrollbarX,
		onScrollbarXChange: setScrollbarX,
		scrollbarXEnabled,
		onScrollbarXEnabledChange: setScrollbarXEnabled,
		scrollbarY,
		onScrollbarYChange: setScrollbarY,
		scrollbarYEnabled,
		onScrollbarYEnabledChange: setScrollbarYEnabled,
		onCornerWidthChange: setCornerWidth,
		onCornerHeightChange: setCornerHeight,
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Primitive.div, {
			dir: direction,
			...scrollAreaProps,
			ref: composedRefs,
			style: {
				position: "relative",
				["--radix-scroll-area-corner-width"]: cornerWidth + "px",
				["--radix-scroll-area-corner-height"]: cornerHeight + "px",
				...props.style
			}
		})
	});
});
ScrollArea$1.displayName = SCROLL_AREA_NAME;
var VIEWPORT_NAME = "ScrollAreaViewport";
var ScrollAreaViewport = import_react.forwardRef((props, forwardedRef) => {
	const { __scopeScrollArea, children, nonce, ...viewportProps } = props;
	const context = useScrollAreaContext(VIEWPORT_NAME, __scopeScrollArea);
	const composedRefs = useComposedRefs(forwardedRef, import_react.useRef(null), context.onViewportChange);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)("style", {
		dangerouslySetInnerHTML: { __html: `[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}` },
		nonce
	}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Primitive.div, {
		"data-radix-scroll-area-viewport": "",
		...viewportProps,
		ref: composedRefs,
		style: {
			overflowX: context.scrollbarXEnabled ? "scroll" : "hidden",
			overflowY: context.scrollbarYEnabled ? "scroll" : "hidden",
			...props.style
		},
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
			ref: context.onContentChange,
			style: {
				minWidth: "100%",
				display: "table"
			},
			children
		})
	})] });
});
ScrollAreaViewport.displayName = VIEWPORT_NAME;
var SCROLLBAR_NAME = "ScrollAreaScrollbar";
var ScrollAreaScrollbar = import_react.forwardRef((props, forwardedRef) => {
	const { forceMount, ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const { onScrollbarXEnabledChange, onScrollbarYEnabledChange } = context;
	const isHorizontal = props.orientation === "horizontal";
	import_react.useEffect(() => {
		isHorizontal ? onScrollbarXEnabledChange(true) : onScrollbarYEnabledChange(true);
		return () => {
			isHorizontal ? onScrollbarXEnabledChange(false) : onScrollbarYEnabledChange(false);
		};
	}, [
		isHorizontal,
		onScrollbarXEnabledChange,
		onScrollbarYEnabledChange
	]);
	return context.type === "hover" ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarHover, {
		...scrollbarProps,
		ref: forwardedRef,
		forceMount
	}) : context.type === "scroll" ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarScroll, {
		...scrollbarProps,
		ref: forwardedRef,
		forceMount
	}) : context.type === "auto" ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarAuto, {
		...scrollbarProps,
		ref: forwardedRef,
		forceMount
	}) : context.type === "always" ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarVisible, {
		...scrollbarProps,
		ref: forwardedRef
	}) : null;
});
ScrollAreaScrollbar.displayName = SCROLLBAR_NAME;
var ScrollAreaScrollbarHover = import_react.forwardRef((props, forwardedRef) => {
	const { forceMount, ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const [visible, setVisible] = import_react.useState(false);
	import_react.useEffect(() => {
		const scrollArea = context.scrollArea;
		let hideTimer = 0;
		if (scrollArea) {
			const handlePointerEnter = () => {
				window.clearTimeout(hideTimer);
				setVisible(true);
			};
			const handlePointerLeave = () => {
				hideTimer = window.setTimeout(() => setVisible(false), context.scrollHideDelay);
			};
			scrollArea.addEventListener("pointerenter", handlePointerEnter);
			scrollArea.addEventListener("pointerleave", handlePointerLeave);
			return () => {
				window.clearTimeout(hideTimer);
				scrollArea.removeEventListener("pointerenter", handlePointerEnter);
				scrollArea.removeEventListener("pointerleave", handlePointerLeave);
			};
		}
	}, [context.scrollArea, context.scrollHideDelay]);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Presence, {
		present: forceMount || visible,
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarAuto, {
			"data-state": visible ? "visible" : "hidden",
			...scrollbarProps,
			ref: forwardedRef
		})
	});
});
var ScrollAreaScrollbarScroll = import_react.forwardRef((props, forwardedRef) => {
	const { forceMount, ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const isHorizontal = props.orientation === "horizontal";
	const debounceScrollEnd = useDebounceCallback(() => send("SCROLL_END"), 100);
	const [state, send] = useStateMachine("hidden", {
		hidden: { SCROLL: "scrolling" },
		scrolling: {
			SCROLL_END: "idle",
			POINTER_ENTER: "interacting"
		},
		interacting: {
			SCROLL: "interacting",
			POINTER_LEAVE: "idle"
		},
		idle: {
			HIDE: "hidden",
			SCROLL: "scrolling",
			POINTER_ENTER: "interacting"
		}
	});
	import_react.useEffect(() => {
		if (state === "idle") {
			const hideTimer = window.setTimeout(() => send("HIDE"), context.scrollHideDelay);
			return () => window.clearTimeout(hideTimer);
		}
	}, [
		state,
		context.scrollHideDelay,
		send
	]);
	import_react.useEffect(() => {
		const viewport = context.viewport;
		const scrollDirection = isHorizontal ? "scrollLeft" : "scrollTop";
		if (viewport) {
			let prevScrollPos = viewport[scrollDirection];
			const handleScroll = () => {
				const scrollPos = viewport[scrollDirection];
				if (prevScrollPos !== scrollPos) {
					send("SCROLL");
					debounceScrollEnd();
				}
				prevScrollPos = scrollPos;
			};
			viewport.addEventListener("scroll", handleScroll);
			return () => viewport.removeEventListener("scroll", handleScroll);
		}
	}, [
		context.viewport,
		isHorizontal,
		send,
		debounceScrollEnd
	]);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Presence, {
		present: forceMount || state !== "hidden",
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarVisible, {
			"data-state": state === "hidden" ? "hidden" : "visible",
			...scrollbarProps,
			ref: forwardedRef,
			onPointerEnter: composeEventHandlers(props.onPointerEnter, () => send("POINTER_ENTER")),
			onPointerLeave: composeEventHandlers(props.onPointerLeave, () => send("POINTER_LEAVE"))
		})
	});
});
var ScrollAreaScrollbarAuto = import_react.forwardRef((props, forwardedRef) => {
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const { forceMount, ...scrollbarProps } = props;
	const [visible, setVisible] = import_react.useState(false);
	const isHorizontal = props.orientation === "horizontal";
	const handleResize = useDebounceCallback(() => {
		if (context.viewport) {
			const isOverflowX = context.viewport.offsetWidth < context.viewport.scrollWidth;
			const isOverflowY = context.viewport.offsetHeight < context.viewport.scrollHeight;
			setVisible(isHorizontal ? isOverflowX : isOverflowY);
		}
	}, 10);
	useResizeObserver(context.viewport, handleResize);
	useResizeObserver(context.content, handleResize);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Presence, {
		present: forceMount || visible,
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarVisible, {
			"data-state": visible ? "visible" : "hidden",
			...scrollbarProps,
			ref: forwardedRef
		})
	});
});
var ScrollAreaScrollbarVisible = import_react.forwardRef((props, forwardedRef) => {
	const { orientation = "vertical", ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const thumbRef = import_react.useRef(null);
	const pointerOffsetRef = import_react.useRef(0);
	const [sizes, setSizes] = import_react.useState({
		content: 0,
		viewport: 0,
		scrollbar: {
			size: 0,
			paddingStart: 0,
			paddingEnd: 0
		}
	});
	const thumbRatio = getThumbRatio(sizes.viewport, sizes.content);
	const commonProps = {
		...scrollbarProps,
		sizes,
		onSizesChange: setSizes,
		hasThumb: Boolean(thumbRatio > 0 && thumbRatio < 1),
		onThumbChange: (thumb) => thumbRef.current = thumb,
		onThumbPointerUp: () => pointerOffsetRef.current = 0,
		onThumbPointerDown: (pointerPos) => pointerOffsetRef.current = pointerPos
	};
	function getScrollPosition(pointerPos, dir) {
		return getScrollPositionFromPointer(pointerPos, pointerOffsetRef.current, sizes, dir);
	}
	if (orientation === "horizontal") return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarX, {
		...commonProps,
		ref: forwardedRef,
		onThumbPositionChange: () => {
			if (context.viewport && thumbRef.current) {
				const scrollPos = context.viewport.scrollLeft;
				const offset = getThumbOffsetFromScroll(scrollPos, sizes, context.dir);
				thumbRef.current.style.transform = `translate3d(${offset}px, 0, 0)`;
			}
		},
		onWheelScroll: (scrollPos) => {
			if (context.viewport) context.viewport.scrollLeft = scrollPos;
		},
		onDragScroll: (pointerPos) => {
			if (context.viewport) context.viewport.scrollLeft = getScrollPosition(pointerPos, context.dir);
		}
	});
	if (orientation === "vertical") return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarY, {
		...commonProps,
		ref: forwardedRef,
		onThumbPositionChange: () => {
			if (context.viewport && thumbRef.current) {
				const scrollPos = context.viewport.scrollTop;
				const offset = getThumbOffsetFromScroll(scrollPos, sizes);
				thumbRef.current.style.transform = `translate3d(0, ${offset}px, 0)`;
			}
		},
		onWheelScroll: (scrollPos) => {
			if (context.viewport) context.viewport.scrollTop = scrollPos;
		},
		onDragScroll: (pointerPos) => {
			if (context.viewport) context.viewport.scrollTop = getScrollPosition(pointerPos);
		}
	});
	return null;
});
var ScrollAreaScrollbarX = import_react.forwardRef((props, forwardedRef) => {
	const { sizes, onSizesChange, ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const [computedStyle, setComputedStyle] = import_react.useState();
	const ref = import_react.useRef(null);
	const composeRefs = useComposedRefs(forwardedRef, ref, context.onScrollbarXChange);
	import_react.useEffect(() => {
		if (ref.current) setComputedStyle(getComputedStyle(ref.current));
	}, [ref]);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarImpl, {
		"data-orientation": "horizontal",
		...scrollbarProps,
		ref: composeRefs,
		sizes,
		style: {
			bottom: 0,
			left: context.dir === "rtl" ? "var(--radix-scroll-area-corner-width)" : 0,
			right: context.dir === "ltr" ? "var(--radix-scroll-area-corner-width)" : 0,
			["--radix-scroll-area-thumb-width"]: getThumbSize(sizes) + "px",
			...props.style
		},
		onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.x),
		onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.x),
		onWheelScroll: (event, maxScrollPos) => {
			if (context.viewport) {
				const scrollPos = context.viewport.scrollLeft + event.deltaX;
				props.onWheelScroll(scrollPos);
				if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) event.preventDefault();
			}
		},
		onResize: () => {
			if (ref.current && context.viewport && computedStyle) onSizesChange({
				content: context.viewport.scrollWidth,
				viewport: context.viewport.offsetWidth,
				scrollbar: {
					size: ref.current.clientWidth,
					paddingStart: toInt(computedStyle.paddingLeft),
					paddingEnd: toInt(computedStyle.paddingRight)
				}
			});
		}
	});
});
var ScrollAreaScrollbarY = import_react.forwardRef((props, forwardedRef) => {
	const { sizes, onSizesChange, ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, props.__scopeScrollArea);
	const [computedStyle, setComputedStyle] = import_react.useState();
	const ref = import_react.useRef(null);
	const composeRefs = useComposedRefs(forwardedRef, ref, context.onScrollbarYChange);
	import_react.useEffect(() => {
		if (ref.current) setComputedStyle(getComputedStyle(ref.current));
	}, [ref]);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbarImpl, {
		"data-orientation": "vertical",
		...scrollbarProps,
		ref: composeRefs,
		sizes,
		style: {
			top: 0,
			right: context.dir === "ltr" ? 0 : void 0,
			left: context.dir === "rtl" ? 0 : void 0,
			bottom: "var(--radix-scroll-area-corner-height)",
			["--radix-scroll-area-thumb-height"]: getThumbSize(sizes) + "px",
			...props.style
		},
		onThumbPointerDown: (pointerPos) => props.onThumbPointerDown(pointerPos.y),
		onDragScroll: (pointerPos) => props.onDragScroll(pointerPos.y),
		onWheelScroll: (event, maxScrollPos) => {
			if (context.viewport) {
				const scrollPos = context.viewport.scrollTop + event.deltaY;
				props.onWheelScroll(scrollPos);
				if (isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos)) event.preventDefault();
			}
		},
		onResize: () => {
			if (ref.current && context.viewport && computedStyle) onSizesChange({
				content: context.viewport.scrollHeight,
				viewport: context.viewport.offsetHeight,
				scrollbar: {
					size: ref.current.clientHeight,
					paddingStart: toInt(computedStyle.paddingTop),
					paddingEnd: toInt(computedStyle.paddingBottom)
				}
			});
		}
	});
});
var [ScrollbarProvider, useScrollbarContext] = createScrollAreaContext(SCROLLBAR_NAME);
var ScrollAreaScrollbarImpl = import_react.forwardRef((props, forwardedRef) => {
	const { __scopeScrollArea, sizes, hasThumb, onThumbChange, onThumbPointerUp, onThumbPointerDown, onThumbPositionChange, onDragScroll, onWheelScroll, onResize, ...scrollbarProps } = props;
	const context = useScrollAreaContext(SCROLLBAR_NAME, __scopeScrollArea);
	const [scrollbar, setScrollbar] = import_react.useState(null);
	const composeRefs = useComposedRefs(forwardedRef, (node) => setScrollbar(node));
	const rectRef = import_react.useRef(null);
	const prevWebkitUserSelectRef = import_react.useRef("");
	const viewport = context.viewport;
	const maxScrollPos = sizes.content - sizes.viewport;
	const handleWheelScroll = useCallbackRef(onWheelScroll);
	const handleThumbPositionChange = useCallbackRef(onThumbPositionChange);
	const handleResize = useDebounceCallback(onResize, 10);
	function handleDragScroll(event) {
		if (rectRef.current) onDragScroll({
			x: event.clientX - rectRef.current.left,
			y: event.clientY - rectRef.current.top
		});
	}
	import_react.useEffect(() => {
		const handleWheel = (event) => {
			const element = event.target;
			if (scrollbar?.contains(element)) handleWheelScroll(event, maxScrollPos);
		};
		document.addEventListener("wheel", handleWheel, { passive: false });
		return () => document.removeEventListener("wheel", handleWheel, { passive: false });
	}, [
		viewport,
		scrollbar,
		maxScrollPos,
		handleWheelScroll
	]);
	import_react.useEffect(handleThumbPositionChange, [sizes, handleThumbPositionChange]);
	useResizeObserver(scrollbar, handleResize);
	useResizeObserver(context.content, handleResize);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollbarProvider, {
		scope: __scopeScrollArea,
		scrollbar,
		hasThumb,
		onThumbChange: useCallbackRef(onThumbChange),
		onThumbPointerUp: useCallbackRef(onThumbPointerUp),
		onThumbPositionChange: handleThumbPositionChange,
		onThumbPointerDown: useCallbackRef(onThumbPointerDown),
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Primitive.div, {
			...scrollbarProps,
			ref: composeRefs,
			style: {
				position: "absolute",
				...scrollbarProps.style
			},
			onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {
				if (event.button === 0) {
					event.target.setPointerCapture(event.pointerId);
					rectRef.current = scrollbar.getBoundingClientRect();
					prevWebkitUserSelectRef.current = document.body.style.webkitUserSelect;
					document.body.style.webkitUserSelect = "none";
					if (context.viewport) context.viewport.style.scrollBehavior = "auto";
					handleDragScroll(event);
				}
			}),
			onPointerMove: composeEventHandlers(props.onPointerMove, handleDragScroll),
			onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {
				const element = event.target;
				if (element.hasPointerCapture(event.pointerId)) element.releasePointerCapture(event.pointerId);
				document.body.style.webkitUserSelect = prevWebkitUserSelectRef.current;
				if (context.viewport) context.viewport.style.scrollBehavior = "";
				rectRef.current = null;
			})
		})
	});
});
var THUMB_NAME = "ScrollAreaThumb";
var ScrollAreaThumb = import_react.forwardRef((props, forwardedRef) => {
	const { forceMount, ...thumbProps } = props;
	const scrollbarContext = useScrollbarContext(THUMB_NAME, props.__scopeScrollArea);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Presence, {
		present: forceMount || scrollbarContext.hasThumb,
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaThumbImpl, {
			ref: forwardedRef,
			...thumbProps
		})
	});
});
var ScrollAreaThumbImpl = import_react.forwardRef((props, forwardedRef) => {
	const { __scopeScrollArea, style, ...thumbProps } = props;
	const scrollAreaContext = useScrollAreaContext(THUMB_NAME, __scopeScrollArea);
	const scrollbarContext = useScrollbarContext(THUMB_NAME, __scopeScrollArea);
	const { onThumbPositionChange } = scrollbarContext;
	const composedRef = useComposedRefs(forwardedRef, (node) => scrollbarContext.onThumbChange(node));
	const removeUnlinkedScrollListenerRef = import_react.useRef(void 0);
	const debounceScrollEnd = useDebounceCallback(() => {
		if (removeUnlinkedScrollListenerRef.current) {
			removeUnlinkedScrollListenerRef.current();
			removeUnlinkedScrollListenerRef.current = void 0;
		}
	}, 100);
	import_react.useEffect(() => {
		const viewport = scrollAreaContext.viewport;
		if (viewport) {
			const handleScroll = () => {
				debounceScrollEnd();
				if (!removeUnlinkedScrollListenerRef.current) {
					removeUnlinkedScrollListenerRef.current = addUnlinkedScrollListener(viewport, onThumbPositionChange);
					onThumbPositionChange();
				}
			};
			onThumbPositionChange();
			viewport.addEventListener("scroll", handleScroll);
			return () => viewport.removeEventListener("scroll", handleScroll);
		}
	}, [
		scrollAreaContext.viewport,
		debounceScrollEnd,
		onThumbPositionChange
	]);
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Primitive.div, {
		"data-state": scrollbarContext.hasThumb ? "visible" : "hidden",
		...thumbProps,
		ref: composedRef,
		style: {
			width: "var(--radix-scroll-area-thumb-width)",
			height: "var(--radix-scroll-area-thumb-height)",
			...style
		},
		onPointerDownCapture: composeEventHandlers(props.onPointerDownCapture, (event) => {
			const thumbRect = event.target.getBoundingClientRect();
			const x = event.clientX - thumbRect.left;
			const y = event.clientY - thumbRect.top;
			scrollbarContext.onThumbPointerDown({
				x,
				y
			});
		}),
		onPointerUp: composeEventHandlers(props.onPointerUp, scrollbarContext.onThumbPointerUp)
	});
});
ScrollAreaThumb.displayName = THUMB_NAME;
var CORNER_NAME = "ScrollAreaCorner";
var ScrollAreaCorner = import_react.forwardRef((props, forwardedRef) => {
	const context = useScrollAreaContext(CORNER_NAME, props.__scopeScrollArea);
	const hasBothScrollbarsVisible = Boolean(context.scrollbarX && context.scrollbarY);
	return context.type !== "scroll" && hasBothScrollbarsVisible ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaCornerImpl, {
		...props,
		ref: forwardedRef
	}) : null;
});
ScrollAreaCorner.displayName = CORNER_NAME;
var ScrollAreaCornerImpl = import_react.forwardRef((props, forwardedRef) => {
	const { __scopeScrollArea, ...cornerProps } = props;
	const context = useScrollAreaContext(CORNER_NAME, __scopeScrollArea);
	const [width, setWidth] = import_react.useState(0);
	const [height, setHeight] = import_react.useState(0);
	const hasSize = Boolean(width && height);
	useResizeObserver(context.scrollbarX, () => {
		const height2 = context.scrollbarX?.offsetHeight || 0;
		context.onCornerHeightChange(height2);
		setHeight(height2);
	});
	useResizeObserver(context.scrollbarY, () => {
		const width2 = context.scrollbarY?.offsetWidth || 0;
		context.onCornerWidthChange(width2);
		setWidth(width2);
	});
	return hasSize ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Primitive.div, {
		...cornerProps,
		ref: forwardedRef,
		style: {
			width,
			height,
			position: "absolute",
			right: context.dir === "ltr" ? 0 : void 0,
			left: context.dir === "rtl" ? 0 : void 0,
			bottom: 0,
			...props.style
		}
	}) : null;
});
function toInt(value) {
	return value ? parseInt(value, 10) : 0;
}
function getThumbRatio(viewportSize, contentSize) {
	const ratio = viewportSize / contentSize;
	return isNaN(ratio) ? 0 : ratio;
}
function getThumbSize(sizes) {
	const ratio = getThumbRatio(sizes.viewport, sizes.content);
	const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;
	const thumbSize = (sizes.scrollbar.size - scrollbarPadding) * ratio;
	return Math.max(thumbSize, 18);
}
function getScrollPositionFromPointer(pointerPos, pointerOffset, sizes, dir = "ltr") {
	const thumbSizePx = getThumbSize(sizes);
	const thumbCenter = thumbSizePx / 2;
	const offset = pointerOffset || thumbCenter;
	const thumbOffsetFromEnd = thumbSizePx - offset;
	const minPointerPos = sizes.scrollbar.paddingStart + offset;
	const maxPointerPos = sizes.scrollbar.size - sizes.scrollbar.paddingEnd - thumbOffsetFromEnd;
	const maxScrollPos = sizes.content - sizes.viewport;
	const scrollRange = dir === "ltr" ? [0, maxScrollPos] : [maxScrollPos * -1, 0];
	return linearScale([minPointerPos, maxPointerPos], scrollRange)(pointerPos);
}
function getThumbOffsetFromScroll(scrollPos, sizes, dir = "ltr") {
	const thumbSizePx = getThumbSize(sizes);
	const scrollbarPadding = sizes.scrollbar.paddingStart + sizes.scrollbar.paddingEnd;
	const scrollbar = sizes.scrollbar.size - scrollbarPadding;
	const maxScrollPos = sizes.content - sizes.viewport;
	const maxThumbPos = scrollbar - thumbSizePx;
	const scrollWithoutMomentum = clamp(scrollPos, dir === "ltr" ? [0, maxScrollPos] : [maxScrollPos * -1, 0]);
	return linearScale([0, maxScrollPos], [0, maxThumbPos])(scrollWithoutMomentum);
}
function linearScale(input, output) {
	return (value) => {
		if (input[0] === input[1] || output[0] === output[1]) return output[0];
		const ratio = (output[1] - output[0]) / (input[1] - input[0]);
		return output[0] + ratio * (value - input[0]);
	};
}
function isScrollingWithinScrollbarBounds(scrollPos, maxScrollPos) {
	return scrollPos > 0 && scrollPos < maxScrollPos;
}
var addUnlinkedScrollListener = (node, handler = () => {}) => {
	let prevPosition = {
		left: node.scrollLeft,
		top: node.scrollTop
	};
	let rAF = 0;
	(function loop() {
		const position = {
			left: node.scrollLeft,
			top: node.scrollTop
		};
		const isHorizontalScroll = prevPosition.left !== position.left;
		const isVerticalScroll = prevPosition.top !== position.top;
		if (isHorizontalScroll || isVerticalScroll) handler();
		prevPosition = position;
		rAF = window.requestAnimationFrame(loop);
	})();
	return () => window.cancelAnimationFrame(rAF);
};
function useDebounceCallback(callback, delay) {
	const handleCallback = useCallbackRef(callback);
	const debounceTimerRef = import_react.useRef(0);
	import_react.useEffect(() => () => window.clearTimeout(debounceTimerRef.current), []);
	return import_react.useCallback(() => {
		window.clearTimeout(debounceTimerRef.current);
		debounceTimerRef.current = window.setTimeout(handleCallback, delay);
	}, [handleCallback, delay]);
}
function useResizeObserver(element, onResize) {
	const handleResize = useCallbackRef(onResize);
	useLayoutEffect2(() => {
		let rAF = 0;
		if (element) {
			const resizeObserver = new ResizeObserver(() => {
				cancelAnimationFrame(rAF);
				rAF = window.requestAnimationFrame(handleResize);
			});
			resizeObserver.observe(element);
			return () => {
				window.cancelAnimationFrame(rAF);
				resizeObserver.unobserve(element);
			};
		}
	}, [element, handleResize]);
}
var Root = ScrollArea$1;
var Viewport = ScrollAreaViewport;
var Corner = ScrollAreaCorner;
var ScrollArea = import_react.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Root, {
	ref,
	className: cn("relative overflow-hidden", className),
	...props,
	children: [
		/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Viewport, {
			className: "h-full w-full rounded-[inherit]",
			children
		}),
		/* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollBar, {}),
		/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Corner, {})
	]
}));
ScrollArea.displayName = Root.displayName;
var ScrollBar = import_react.forwardRef(({ className, orientation = "vertical", ...props }, ref) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaScrollbar, {
	ref,
	orientation,
	className: cn("flex touch-none select-none transition-colors", orientation === "vertical" && "h-full w-2.5 border-l border-l-transparent p-[1px]", orientation === "horizontal" && "h-2.5 flex-col border-t border-t-transparent p-[1px]", className),
	...props,
	children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollAreaThumb, { className: "relative flex-1 rounded-full bg-border" })
}));
ScrollBar.displayName = ScrollAreaScrollbar.displayName;
function Documents() {
	const [docs, setDocs] = useDocumentStore_default();
	const [folders, setFolders] = useFolderStore_default();
	const [, setAction] = useQuickActionStore_default();
	const [activeId, setActiveId] = (0, import_react.useState)(docs[0]?.id);
	const [newFolderOpen, setNewFolderOpen] = (0, import_react.useState)(false);
	const [newFolderName, setNewFolderName] = (0, import_react.useState)("");
	const [isSidebarOpen, setIsSidebarOpen] = (0, import_react.useState)(true);
	const [search, setSearch] = (0, import_react.useState)("");
	const activeDoc = docs.find((d) => d.id === activeId);
	const filteredDocs = search ? docs.filter((d) => d.title.toLowerCase().includes(search.toLowerCase())) : docs;
	const filteredFolders = search ? folders.filter((f) => f.name.toLowerCase().includes(search.toLowerCase())) : folders;
	const createDoc = () => {
		setAction({
			type: "document",
			mode: "create"
		});
	};
	const createFolder = (e) => {
		e.preventDefault();
		if (!newFolderName.trim()) return;
		const newFolder = {
			id: generateId("f"),
			projectId: "p1",
			module: "project",
			name: newFolderName,
			parentId: null,
			createdAt: (/* @__PURE__ */ new Date()).toISOString(),
			isExpanded: true
		};
		setFolders([...folders, newFolder]);
		setNewFolderName("");
		setNewFolderOpen(false);
	};
	const toggleFolder = (id) => {
		setFolders(folders.map((f) => f.id === id ? {
			...f,
			isExpanded: !f.isExpanded
		} : f));
	};
	const onDragStart = (e, type, id) => {
		e.dataTransfer.setData("type", type);
		e.dataTransfer.setData("id", id);
	};
	const onDrop = (e, targetFolderId) => {
		e.preventDefault();
		e.stopPropagation();
		const type = e.dataTransfer.getData("type");
		const id = e.dataTransfer.getData("id");
		if (type === "document") setDocs(docs.map((d) => d.id === id ? {
			...d,
			folderId: targetFolderId
		} : d));
		else if (type === "folder") {
			if (id === targetFolderId) return;
			let currentParent = targetFolderId;
			let isDescendant = false;
			while (currentParent) {
				if (currentParent === id) {
					isDescendant = true;
					break;
				}
				const parentFolder = folders.find((f) => f.id === currentParent);
				currentParent = parentFolder ? parentFolder.parentId : null;
			}
			if (!isDescendant) setFolders(folders.map((f) => f.id === id ? {
				...f,
				parentId: targetFolderId
			} : f));
		}
	};
	const onDragOver = (e) => {
		e.preventDefault();
	};
	const renderTree = (parentId, level = 0) => {
		const childFolders = filteredFolders.filter((f) => f.parentId === parentId);
		const childDocs = filteredDocs.filter((d) => d.folderId === parentId);
		return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
			className: "flex flex-col gap-1 mt-1",
			children: [childFolders.map((folder) => /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
				className: "flex flex-col",
				children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
					draggable: true,
					onDragStart: (e) => onDragStart(e, "folder", folder.id),
					onDrop: (e) => onDrop(e, folder.id),
					onDragOver,
					className: "group flex items-center gap-2 py-2 pr-3 rounded-lg text-md transition-colors cursor-pointer hover:bg-muted text-foreground select-none",
					style: { paddingLeft: `${level * 16 + 12}px` },
					children: [
						/* @__PURE__ */ (0, import_jsx_runtime.jsx)("button", {
							onClick: (e) => {
								e.stopPropagation();
								toggleFolder(folder.id);
							},
							className: "p-1 hover:bg-border rounded-md text-muted-foreground shrink-0 transition-colors",
							children: folder.isExpanded ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ChevronDown, { size: 14 }) : /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ChevronRight, { size: 14 })
						}),
						/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Folder, {
							size: 16,
							className: "text-muted-foreground fill-muted-foreground/20 shrink-0"
						}),
						/* @__PURE__ */ (0, import_jsx_runtime.jsx)("span", {
							className: "truncate flex-1 font-semibold text-sm",
							children: folder.name
						})
					]
				}), folder.isExpanded && renderTree(folder.id, level + 1)]
			}, folder.id)), childDocs.map((doc) => /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("button", {
				draggable: true,
				onDragStart: (e) => onDragStart(e, "document", doc.id),
				onClick: () => setActiveId(doc.id),
				className: cn("flex items-center gap-3 py-2 pr-3 rounded-lg text-base transition-colors w-full text-left cursor-grab active:cursor-grabbing select-none font-medium", activeId === doc.id ? "bg-primary/10 text-primary" : "text-slate-600 hover:bg-slate-100 hover:text-slate-900"),
				style: { paddingLeft: `${level * 16 + (parentId === null ? 12 : 36)}px` },
				children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(FileText, {
					size: 16,
					className: `shrink-0 ${activeId === doc.id ? "text-primary" : "text-slate-400"}`
				}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)("span", {
					className: "truncate flex-1 text-sm",
					children: doc.title
				})]
			}, doc.id))]
		});
	};
	return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
		className: "flex h-full bg-background overflow-hidden animate-fade-in",
		children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
			className: cn("border-r border-border bg-card flex flex-col shrink-0 z-10 shadow-sm transition-all duration-300", isSidebarOpen ? "w-72" : "w-[60px]"),
			children: [
				/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
					className: cn("p-4 border-b border-border flex flex-col gap-3", !isSidebarOpen && "items-center px-2"),
					children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: cn("flex items-center w-full", isSidebarOpen ? "justify-between" : "justify-center"),
						children: [isSidebarOpen && /* @__PURE__ */ (0, import_jsx_runtime.jsx)("span", {
							className: "font-semibold text-sm text-foreground px-2",
							children: "Pastas"
						}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
							variant: "ghost",
							size: "icon",
							className: cn("h-8 w-8 text-muted-foreground hover:text-foreground shrink-0 rounded-lg hover:bg-slate-200/50", !isSidebarOpen && "mb-2"),
							onClick: () => setIsSidebarOpen(!isSidebarOpen),
							title: isSidebarOpen ? "Ocultar pastas" : "Mostrar pastas",
							children: isSidebarOpen ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(PanelLeftClose, { size: 16 }) : /* @__PURE__ */ (0, import_jsx_runtime.jsx)(PanelLeft, { size: 16 })
						})]
					}), isSidebarOpen ? /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: "flex flex-col gap-2 w-full animate-fade-in",
						children: [/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
							className: "w-full justify-start shadow-sm font-semibold text-sm",
							onClick: createDoc,
							children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Plus, {
								size: 16,
								className: "mr-2"
							}), " Novo Documento"]
						}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Dialog, {
							open: newFolderOpen,
							onOpenChange: setNewFolderOpen,
							children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogTrigger, {
								asChild: true,
								children: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
									variant: "outline",
									className: "w-full justify-start text-muted-foreground hover:text-foreground shadow-sm bg-background border-border text-sm",
									children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(FolderPlus, {
										size: 16,
										className: "mr-2"
									}), " Nova Pasta"]
								})
							}), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(DialogContent, { children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogHeader, { children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(DialogTitle, { children: "Criar Nova Pasta" }) }), /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("form", {
								onSubmit: createFolder,
								className: "space-y-4 pt-6",
								children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Input, {
									placeholder: "Nome da Pasta",
									value: newFolderName,
									onChange: (e) => setNewFolderName(e.target.value),
									autoFocus: true
								}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
									type: "submit",
									className: "w-full",
									children: "Criar Pasta"
								})]
							})] })]
						})]
					}) : /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Button, {
						size: "icon",
						variant: "default",
						className: "h-10 w-10 shrink-0 shadow-sm rounded-xl",
						onClick: createDoc,
						title: "Novo Documento",
						children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Plus, { size: 18 })
					})]
				}),
				isSidebarOpen && /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
					className: "px-3 pb-1",
					children: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
						className: "relative",
						children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Search, {
							className: "absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground",
							size: 14
						}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Input, {
							placeholder: "Buscar docs...",
							value: search,
							onChange: (e) => setSearch(e.target.value),
							className: "pl-8 h-8 text-sm bg-background"
						})]
					})
				}),
				isSidebarOpen ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ScrollArea, {
					className: "flex-1 animate-fade-in",
					onDrop: (e) => onDrop(e, null),
					onDragOver,
					children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
						className: "p-3 min-h-full",
						children: renderTree(null)
					})
				}) : /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
					className: "flex-1 flex flex-col items-center pt-6 gap-6 animate-fade-in",
					children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
						className: "p-2 rounded-xl bg-muted/50 text-muted-foreground cursor-pointer hover:bg-muted transition-colors",
						title: "Pastas ocultas",
						children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Folder, {
							size: 20,
							className: "opacity-50"
						})
					})
				})
			]
		}), /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
			className: "flex-1 overflow-hidden bg-[#f8fafc]",
			children: activeDoc ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(RichTextEditor, {
				doc: activeDoc,
				onTitleChange: (title) => setDocs(docs.map((d) => d.id === activeDoc.id ? {
					...d,
					title
				} : d)),
				onProjectChange: (projectId) => setDocs(docs.map((d) => d.id === activeDoc.id ? {
					...d,
					projectId
				} : d)),
				onChange: (content) => setDocs(docs.map((d) => d.id === activeDoc.id ? {
					...d,
					content
				} : d))
			}) : /* @__PURE__ */ (0, import_jsx_runtime.jsxs)("div", {
				className: "flex items-center justify-center h-full text-muted-foreground flex-col gap-4 max-w-lg mx-auto min-h-[400px]",
				children: [
					/* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
						className: "w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2",
						children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(FileText, { size: 24 })
					}),
					/* @__PURE__ */ (0, import_jsx_runtime.jsx)("h3", {
						className: "text-xl font-bold text-foreground",
						children: "Documentos"
					}),
					/* @__PURE__ */ (0, import_jsx_runtime.jsx)("span", {
						className: "text-base text-center",
						children: "Selecione um documento na barra lateral ou crie um novo."
					}),
					/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(Button, {
						onClick: createDoc,
						className: "mt-2 font-semibold",
						children: [/* @__PURE__ */ (0, import_jsx_runtime.jsx)(Plus, {
							size: 16,
							className: "mr-2"
						}), " Novo Documento"]
					})
				]
			})
		})]
	});
}
export { Documents as default };

//# sourceMappingURL=Documents-CxhVn9g2.js.map